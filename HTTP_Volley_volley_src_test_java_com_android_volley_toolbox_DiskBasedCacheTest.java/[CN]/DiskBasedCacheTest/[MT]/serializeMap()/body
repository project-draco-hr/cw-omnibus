{
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  Map<String,String> empty=new HashMap<String,String>();
  DiskBasedCache.writeStringStringMap(empty,baos);
  DiskBasedCache.writeStringStringMap(null,baos);
  Map<String,String> twoThings=new HashMap<String,String>();
  twoThings.put("first","thing");
  twoThings.put("second","item");
  DiskBasedCache.writeStringStringMap(twoThings,baos);
  Map<String,String> emptyKey=new HashMap<String,String>();
  emptyKey.put("","value");
  DiskBasedCache.writeStringStringMap(emptyKey,baos);
  Map<String,String> emptyValue=new HashMap<String,String>();
  emptyValue.put("key","");
  DiskBasedCache.writeStringStringMap(emptyValue,baos);
  ByteArrayInputStream bais=new ByteArrayInputStream(baos.toByteArray());
  assertEquals(DiskBasedCache.readStringStringMap(bais),empty);
  assertEquals(DiskBasedCache.readStringStringMap(bais),empty);
  assertEquals(DiskBasedCache.readStringStringMap(bais),twoThings);
  assertEquals(DiskBasedCache.readStringStringMap(bais),emptyKey);
  assertEquals(DiskBasedCache.readStringStringMap(bais),emptyValue);
}
