{
  RequestFinishedListener listener=mock(RequestFinishedListener.class);
  Request request=new MockRequest();
  Answer<NetworkResponse> delayAnswer=new Answer<NetworkResponse>(){
    @Override public NetworkResponse answer(    InvocationOnMock invocationOnMock) throws Throwable {
      Thread.sleep(200);
      return mock(NetworkResponse.class);
    }
  }
;
  RequestQueue queue=new RequestQueue(new NoCache(),mMockNetwork,1,mDelivery);
  when(mMockNetwork.performRequest(request)).thenAnswer(delayAnswer);
  queue.addRequestFinishedListener(listener);
  queue.start();
  queue.add(request);
  request.cancel();
  verify(listener,timeout(100)).onRequestFinished(request);
  queue.stop();
}
